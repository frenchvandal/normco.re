# UI Component Usage Guide

This guide explains how to use the design system components in Lume templates
and content. The focus is on the components currently implemented in this
codebase and the APIs that are already wired up in `main.js`.

---

## Table of Contents

1. [Tabs](#tabs)
2. [Code Tabs](#code-tabs)
3. [Toast Notifications](#toast-notifications)
4. [Modal](#modal)
5. [Post List](#post-list)
6. [Post Details](#post-details)
7. [Pagination](#pagination)
8. [Meta Tags](#meta-tags)
9. [Form Components](#form-components)
10. [Navigation Components](#navigation-components)
11. [Tooltip](#tooltip)
12. [Skeleton Loaders](#skeleton-loaders)
13. [Author Profile](#author-profile)
14. [Cover Image](#cover-image)
15. [Related Posts](#related-posts)
16. [Share Buttons](#share-buttons)
17. [Social Icons](#social-icons)
18. [Language Selector](#language-selector)
19. [Source Info](#source-info)

---

## Tabs

### Lume Usage

```typescript
// In a .page.ts file
export default function (data: Lume.Data) {
  const { comp } = data;

  return `
    <h1>Tabs Example</h1>

    ${
    comp.tabs({
      tabs: [
        {
          label: "Overview",
          content: "<p>Project overview</p>",
        },
        {
          label: "Settings",
          content: "<p>Configuration options</p>",
        },
        {
          label: "Advanced",
          content: "<p>Advanced controls</p>",
          badge: "New",
        },
      ],
    })
  }
  `;
}
```

### Variants

```typescript
// Pills variant
${comp.tabs({ tabs: [...], variant: "pills" })}

// Boxed variant
${comp.tabs({ tabs: [...], variant: "boxed" })}

// Vertical tabs
${comp.tabs({ tabs: [...], vertical: true })}
```

### Icons and Badges

```typescript
${comp.tabs({
  tabs: [
    {
      label: "Inbox",
      content: "<p>Messages</p>",
      icon: '<svg aria-hidden="true">...</svg>',
      badge: "5",
    },
    {
      label: "Archive",
      content: "<p>Archived items</p>",
      disabled: true,
    },
  ],
})}
```

### Keyboard Navigation

- **Arrow Left/Right**: Move between tabs
- **Home**: Jump to the first tab
- **End**: Jump to the last tab

Tabs are auto-initialized by `main.js` via the `TabsManager`.

---

## Code Tabs

Use `comp.codeTabs` to render multi-language code snippets with the tabs UI.
When a single snippet is provided, the component renders a plain code block
without tabs.

```typescript
export default function (data: Lume.Data) {
  const { comp } = data;

  return `
    <section>
      <h2>Code Example</h2>
      ${
    comp.codeTabs({
      snippets: [
        {
          lang: "ts",
          label: "TypeScript",
          code: "console.log('Hello from TS');",
        },
        {
          lang: "js",
          label: "JavaScript",
          code: "console.log('Hello from JS');",
        },
      ],
    })
  }
    </section>
  `;
}
```

### Optional Parameters

- `id`: Custom id for the tabs wrapper (auto-generated by default)
- `snippets[].label`: Override the displayed label
- `snippets[].lang`: Language class name for Prism highlighting

---

## Toast Notifications

The toast manager is registered globally as `window.toast` when `main.js` runs.
The base layout already includes the toast container.

### Quick API

```javascript
toast.success("Post published!");
toast.error("Save failed");
toast.warning("Unstable connection");
toast.info("Syncing in the background...", 3000);
```

### Advanced API

```javascript
toast.show({
  message: "Processing your request",
  title: "Working",
  variant: "info",
  duration: 5000, // 0 = no auto-dismiss
  closeable: true,
});

// Close all toasts
toast.dismissAll();
```

### Usage Examples

```javascript
form.addEventListener("submit", async (event) => {
  event.preventDefault();

  try {
    await saveData(formData);
    toast.success("Saved successfully", 3000);
  } catch (error) {
    toast.error("Unable to save the form");
  }
});
```

---

## Modal

Modals are rendered with `comp.modal` and controlled with the global helpers
`openModal`, `closeModal`, and `toggleModal`.

### Lume Usage

```typescript
export default function (data: Lume.Data) {
  const { comp } = data;

  return `
    <button onclick="openModal('confirm-delete')">
      Delete item
    </button>

    ${
    comp.modal({
      id: "confirm-delete",
      title: "Confirm deletion",
      content: `
          <p>Are you sure you want to delete this item?</p>
          <p>This action cannot be undone.</p>
        `,
      footer: `
          <button class="button" onclick="closeModal('confirm-delete')">
            Cancel
          </button>
          <button class="button button--primary">
            Delete
          </button>
        `,
      size: "default",
      closeable: true,
    })
  }
  `;
}
```

### Modal Sizes

- `small`
- `default`
- `large`
- `fullscreen`

### Notes

- Modals are initialized automatically by `main.js`.
- Focus trapping, ESC to close, and backdrop click handling are built in.

---

## Post List

Render a list of posts with metadata. This component expects an array of post
pages and the current page URL to set the active link.

```typescript
export default async function (data: Lume.Data) {
  const { comp, search, url } = data;
  const posts = search.pages("type=post", "date=desc");

  return `
    <section>
      <h1>Latest posts</h1>
      ${await comp.postList({ postslist: posts, url })}
    </section>
  `;
}
```

---

## Post Details

Use this component when you need to show author, date, reading time, and tags
outside of the post list.

```typescript
export default async function (data: Lume.Data) {
  const { comp } = data;

  const details = await comp.postDetails({
    author: data.author,
    date: data.date,
    tags: data.tags,
    readingInfo: data.readingInfo,
  });

  return `
    <article>
      <h1>${data.title}</h1>
      ${details}
    </article>
  `;
}
```

---

## Pagination

Pagination uses the built-in `pagination` object from Lume when a page is
configured with pagination data.

```typescript
export default function (data: Lume.Data) {
  const { comp, pagination, i18n } = data;

  return `
    <section>
      ${comp.pagination({ pagination, i18n })}
    </section>
  `;
}
```

---

## Meta Tags

The meta tags component should be called inside the document `<head>` so each
page has consistent SEO, Open Graph, and JSON-LD data.

```typescript
export default function (data: Lume.Data) {
  const { comp } = data;

  return `
    <head>
      ${comp.metaTags(data)}
    </head>
  `;
}
```

---

## Form Components

Form components are CSS-only, so no JS setup is required. Use the class names
shown below for consistent styling.

```html
<label class="input">
  <span class="input__label">Email</span>
  <input class="input__field" type="email" placeholder="you@example.com" />
</label>

<label class="select">
  <span class="select__label">Plan</span>
  <select class="select__field">
    <option>Starter</option>
    <option>Pro</option>
  </select>
</label>

<label class="checkbox">
  <input class="checkbox__input" type="checkbox" />
  <span class="checkbox__box" aria-hidden="true"></span>
  <span class="checkbox__label">Subscribe to updates</span>
</label>

<label class="switch">
  <input class="switch__input" type="checkbox" />
  <span class="switch__track" aria-hidden="true"></span>
  <span class="switch__label">Enable notifications</span>
</label>
```

---

## Navigation Components

### Breadcrumbs

Use the TypeScript component for consistent markup and variants.

```typescript
export default function (data: Lume.Data) {
  const { comp } = data;

  return `
    ${
    comp.breadcrumbs({
      variant: "boxed",
      items: [
        { label: "Posts", url: "/posts/" },
        { label: "CSS Architecture" },
      ],
    })
  }
  `;
}
```

### Breadcrumb Variants

- `default`
- `boxed`
- `compact`

### Manual Markup (Optional)

If needed, you can still render breadcrumbs with plain HTML:

```html
<nav class="breadcrumbs" aria-label="Breadcrumb">
  <ol class="breadcrumbs__list">
    <li class="breadcrumbs__item">
      <a class="breadcrumbs__link" href="/">Home</a>
      <span class="breadcrumbs__separator" aria-hidden="true">/</span>
    </li>
    <li class="breadcrumbs__item">
      <a class="breadcrumbs__link" href="/posts/">Posts</a>
      <span class="breadcrumbs__separator" aria-hidden="true">/</span>
    </li>
    <li class="breadcrumbs__item">
      <span class="breadcrumbs__current">CSS Architecture</span>
    </li>
  </ol>
</nav>
```

Breadcrumbs are styled via CSS. If you need an interactive ellipsis menu, you
can toggle the `data-state="open"` attribute on `.breadcrumbs__ellipsis-menu`
with a small script.

---

## Tooltip

Tooltips are also CSS-first. Wrap the trigger in `.tooltip-wrapper` and use a
`tooltip` element with a positioning class.

```html
<span class="tooltip-wrapper">
  <button class="button" type="button">Hover me</button>
  <span class="tooltip tooltip--top" role="tooltip">
    Helpful hint text
  </span>
</span>
```

Add `tooltip--bottom`, `tooltip--left`, or `tooltip--right` to change placement,
and optional variants like `tooltip--light`, `tooltip--success`,
`tooltip--warning`, or `tooltip--error`.

---

## Skeleton Loaders

Skeleton loaders are CSS-only. Apply the base class plus a size variant.

```html
<div class="skeleton skeleton--heading"></div>
<div class="skeleton skeleton--text"></div>
<div class="skeleton skeleton--text skeleton--text-sm"></div>
<div class="skeleton skeleton--rect"></div>
```

Use these placeholders while content is loading to keep layout stability.

---

## Author Profile

Display author information with avatar, bio, and social links. Supports two
variants: "compact" for post footers and "full" for profile pages.

### Lume Usage

```typescript
export default function (data: Lume.Data) {
  const { comp } = data;

  return `
    ${
    comp.authorProfile({
      author: {
        name: "Phiphi",
        avatar: "/images/avatar.png",
        bio: "Developer and writer based in Chengdu, China.",
        email: "phiphi@example.com",
        website: "https://normco.re",
        social: {
          github: "frenchvandal",
          twitter: "frenchvandal",
        },
      },
      variant: "full",
      i18n: data.i18n,
    })
  }
  `;
}
```

### Variants

- `compact`: Smaller layout for post footers (avatar + name + bio inline)
- `full`: Larger layout for profile pages (centered, with social icons)

### Social Links

Supported platforms: `github`, `twitter`, `linkedin`, `mastodon`, `email`,
`website`.

---

## Cover Image

Render responsive post cover images with AVIF, WebP, and JPG format support.

### Lume Usage

```typescript
export default function (data: Lume.Data) {
  const { comp } = data;

  return `
    ${
    comp.coverImage({
      image: "/images/cover.jpg",
      imageAlt: "A scenic mountain view",
      imageCaption: "Photo taken in Sichuan, China",
      loading: "eager",
    })
  }
  `;
}
```

### Parameters

- `image`: Path to the image file (required)
- `imageAlt`: Alt text for accessibility (required)
- `imageCaption`: Optional caption displayed below the image
- `loading`: `"eager"` (default for above-fold) or `"lazy"` (for below-fold)

### Responsive Behavior

The component generates srcsets at 640px, 1024px, and 1280px widths with
automatic format selection (AVIF → WebP → JPG).

---

## Related Posts

Display up to 3 related posts based on shared tags, sorted by relevance (tag
overlap count) then by date.

### Lume Usage

```typescript
export default function (data: Lume.Data) {
  const { comp, search, url, tags, i18n } = data;

  return `
    ${
    comp.relatedPosts({
      search,
      url,
      tags,
      i18n,
      maxPosts: 3,
    })
  }
  `;
}
```

### Parameters

- `search`: Lume search helper (required)
- `url`: Current page URL (required)
- `tags`: Array of tags from current post (required)
- `i18n`: Internationalization object (required)
- `maxPosts`: Maximum number of related posts to display (default: 3)

---

## Share Buttons

Social sharing buttons for posts with Twitter, Facebook, LinkedIn, WhatsApp, and
copy-to-clipboard functionality.

### Lume Usage

```typescript
export default function (data: Lume.Data) {
  const { comp, title, url, i18n } = data;

  return `
    ${
    comp.shareButtons({
      title,
      url,
      i18n,
    })
  }
  `;
}
```

### Features

- Platform-specific hover colors matching brand guidelines
- Clipboard API with fallback for older browsers
- Accessible with ARIA labels and keyboard navigation
- Copy button provides visual feedback on success/error

---

## Social Icons

Render social media links with inline SVG icons (based on Feather Icons).

### Lume Usage

```typescript
export default function (data: Lume.Data) {
  const { comp, social_links } = data;

  return `
    <footer>
      ${comp.socialIcons({ links: social_links })}
    </footer>
  `;
}
```

### Supported Platforms

`github`, `twitter`, `linkedin`, `mastodon`, `youtube`, `instagram`, `facebook`,
`twitch`, `email`, `rss`, `jsonfeed`

### Configuration

Social links are configured in `src/_data.ts`:

```typescript
export const social_links = [
  { platform: "github", url: "https://github.com/frenchvandal" },
  { platform: "twitter", url: "https://twitter.com/frenchvandal" },
  { platform: "rss", url: "/feed.xml" },
];
```

---

## Language Selector

Dropdown menu for switching between available language versions of a page.

### Lume Usage

The language selector is automatically integrated into the header navigation via
`layouts/base.ts`. It appears only when alternate language versions are
available.

```typescript
export default function (data: Lume.Data) {
  const { comp, alternates, lang } = data;

  return `
    ${
    comp.languageSelector({
      alternates,
      currentLang: lang,
    })
  }
  `;
}
```

### Features

- Dropdown menu with keyboard navigation (Arrow keys, Escape, Home/End)
- Click-outside-to-close behavior
- Mobile-responsive design (globe icon on small screens)
- Proper ARIA attributes and `hreflang` support

### Keyboard Navigation

- **Arrow Down/Up**: Navigate between language options
- **Enter/Space**: Select language
- **Escape**: Close dropdown
- **Home/End**: Jump to first/last option

---

## Source Info

Display Git source information including last commit hash, date, and edit link.

### Lume Usage

```typescript
export default function (data: Lume.Data) {
  const { comp, sourceFile, date, i18n } = data;

  return `
    ${
    comp.sourceInfo({
      sourceFile,
      date,
      i18n,
      repoUrl: "https://github.com/frenchvandal/normco.re",
    })
  }
  `;
}
```

### Features

- Shows last modified date
- Links to source file on GitHub
- Displays commit hash with monospace styling
- Integrates with footer design
